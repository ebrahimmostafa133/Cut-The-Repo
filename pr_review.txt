## Code Review - Canvas, Physics & Gameloop

Nice foundation for the Cut the Rope mechanics! Here are my observations:

---

### What I Like

- **Clean module separation** - physics, renderer, and gameloop are properly decoupled
- **Delta-time physics** - using `dt` for frame-independent movement is the right approach
- **Line intersection algorithm** - solid math for cut detection using cross products

---

### Questions

1. **Event listeners accumulation**: `start()` adds event listeners every time it's called. If `start()` is called multiple times (e.g., restart level), won't this create duplicate listeners? Should these be added once or cleaned up in `stop()`?

2. **Magic numbers**: Values like `G = 980`, `DAMP = 0.998`, rope `sag = 80` - are these tuned for feel, or would these benefit from being configurable per level?

3. **Auto-start behavior**: `start()` is called at module load. Is this intentional? It might make level transitions harder to control from other modules.

---

### Suggestions for Clean Code

1. **Extract constants**: Consider `const MAX_SWIPE_POINTS = 20;` instead of magic number

2. **Return state from setup()**: The function modifies globals - returning `{ candy, ropes, starsRel }` would improve testability

3. **Event listener cleanup**: Store and call cleanup functions in `stop()` to prevent memory leaks on restart

---

### Efficiency Notes

- `ropes.every(r => r.cut)` runs every frame - could cache this as a flag when a rope is cut
- Otherwise the swipe detection is well-optimized with the 20-point rolling buffer

---

Overall solid work! The physics feel right and the code is readable. The event listener issue is the main thing to address before merge.
